# Кастомная система спавна

[](){ #special-squad-count-pct-def }[Special Squad Count Percentage](commands.md#special-squad-count-pct) (или кастомная система спавна) была разработана в целях реализации усложнённой и в то же время гибкой системы для создания более интересного геймплея на всех серверах, включая HoE+. Это основополагающая механика режима HoE+, которая даёт наибольший эффект в плане сложности игры.

По умолчанию на серверах #05.1, #06, #07 и #08 система кастомных спавнов активна.

Связанные команды:

* [`!specialsquadcountpct`](commands.md#special-squad-count-pct) или [`!sscp`](commands.md#special-squad-count-pct)

* [`!disablecustomsquadspawns`](commands.md#disable-custom-squad-spawns) или [`!dcss`](commands.md#disable-custom-squad-spawns)

## Как это работает?

По сути эта система совмещает в себе особенности [ванильной системы спавнов](https://wiki.killingfloor2.com/index.php?title=ZED_Spawning) и [Controlled Difficulty](https://github.com/notblackout/kf2-controlled-difficulty/blob/master/spawn.md), вбирая в себя преимущества обеих для создания уникального, но в то же время узнаваемого игрового опыта.

Основные особенности:

* Основа системы очень схожа с ванильной игрой, т.е. присутствуют обычные и особые отряды зедов, которые спавнятся определённым образом;

* Обычные отряды по большей части состоят из треша[^1] и медиумов[^2], в то время как особые отряды включают в себе основную массу бигов[^3] и медиумов[^2];

* В отличие от ваниллы, цикл спавна выстраивается на основе соотношения между обычными и особыми отрядами зедов, которое определяется параметром [`special squad count percentage`](commands.md#special-squad-count-pct);

* В отличие от CD, порядок отрядов внутри спавн цикла случайный, что делает кривую сложности менее предсказуемой, но достаточно однородной для интересного игрового опыта;

* Поскольку особые отряды по большей части состоят из бигов[^3], настройка процентажа особых отрядов контролирует соотношение между всеми типами зедов, что является определяющим элементом сложности игры;

* Каждая волна имеет свой собственный набор обычных и особых отрядов, поэтому каждая волна имеет естественные лимиты качества и количества зедов;

* Установив `!sscp` на минимальное возможное значение (0.01) возможно достичь эффект схожий с ванильной игрой (10% бигов[^3] на 10-ой волне), в то время как максимальное значение (1.0) даст ~29-30% бигов[^3], что близко к спавн циклу `ts_mig_v3` из CD.

## Как её использовать?

Настройки кастомного спавна производятся командой [`!specialsquadcountpct`](commands.md#special-squad-count-pct) или [`!sscp`](commands.md#special-squad-count-pct).

Стандартные значения для HoE+ серверов варьируются от `0.1` (10%) до `0.3` (30%), что на мой взгляд является оптимальными значениями для сбалансированного игрового опыта для каждого из серверов.

Значения в районе `0.5`-`0.75` уже способны предоставить вызов для лобби в котором большая часть игроков так или иначе знакомы со стрелковым геймплеем по типу CD, в то время как `1.0` будет прощать ещё меньше ошибок.

!!! example "Пример использования:"

    * `!sscp 0.15`

    * `!sscp 0.5`

    * `!sscp 1`

Любое значение выше `1` не даст никакого эффекта, в то время как `0` вернёт значение по умолчанию из серверных конфигов в зависимости от того на каком сервере была применена команда. Из-за технических ограничений значение нельзя поставить на `0` вручную, поэтому наиболее близкое что можно сделать -- это поставить значение на `0.01`. В противном случае команда [`!dcss`](commands.md#disable-custom-squad-spawns) сделает что нужно.

Если [`disablecustomsquadspawns`](commands.md#disable-custom-squad-spawns), стоит на `true`, то она полностью отключает систему, полностью возвращая ванильный спавн цикл.

## Дополнительные функции

Помимо кастомного цикла спавна есть и другие способы влиять на сложность посредством спавнов, например с помощью шанса спавна бигов[^3] ([`large zed spawn chance`](commands.md#large-zed-spawn-chance)).

[](){ #large-zed-spawn-chance-def }[`Large zed spawn chance`](commands.md#large-zed-spawn-chance) -- это система, позволяющая спавнить бигов[^3] (Мясников и Отбивальщиков) посредством подмены случайных зедов в момент их спавна.

Как это работает:

* Когда [`!dlzsc`](commands.md#disable-large-zed-spawn-chance) стоит на `false`, подменяет случайный треш[^1] или медиумов[^2] бигами[^3] с соотношением 60:40 (60% of Мясников и 40% of Отбивальщиков);

* Шанс настраивается командой [`!lzsc`](commands.md#large-zed-spawn-chance), которая в качестве значения принимает доли единицы (от `0` до `1`);

* Частота срабатывания шанса задана на стороне серверных конфигов и равен 0.5 тикам в секунду (или 1 тик в 2 секунды) в матче из 6 игроков;

* По умолчанию система выключена, т.к. она впоследствии была заменена [кастомной системой спавнов](#special-squad-count-pct-def), однако она всё ещё пригодна к использованию и работает в дополнение к [SSCP](#special-squad-count-pct-def);

* В связи с фундаментальными различиями метода спавна данная система имеет более размеренный поток ларджей[^3] по ходу волны, но всё ещё может доставить хлопоты игрокам в процессе выживания;

* Не рекомендуется использовать эту опцию с высокими значениями `!sscp`, поскольку она может создать несоизмеримо большое количество бигов[^3], которое смогут осилить далеко не все игроки;

* По нашему опыту, значения в районе `0.05`-`0.1` в связке `!sscp 0.3` уже дают достаточное количество ларджей[^3], что уже погранично-играбельно в рамках обычного матча;

* Также есть система [Max Large Monsters](commands.md#disable-max-large-monsters), позволяющая ограничивать количество живых бигов[^3] на карте, которая задумывалась для использования в связке с [`!lzsc`](commands.md#large-zed-spawn-chance), но также осталась пылиться на полке.

## Vent-спавны

В ванильной игре есть механика спавна зедов из вентиляционных шахт и канализационных люков. Обычно это Клоты, Ползуны и Сталкеры. Большинство ванильных карт спроектированы таким образом, что они провоцируют игроков на передвижение по карте (кайтинг) за счёт того что зеды спавнятся из каждого угла. В некоторых случаях так называемые "вент спавны" ответственны за такое поведение спавна на карте. Однако можно отключить этот тип точек спавна зедов, что не влияет на интенсивность потока спавнящихся зедов на карте, но значительно улучшает комфорт игры при удержании определённых точек на карте (т.е. при holdout-стиле игры).

[`!disableventspawns`](commands.md#disable-vent-spawns) или [`!dvs`](commands.md#disable-vent-spawns) со значением `true` отключает такое поведение, делая некоторые точки на картах пригодными для того чтобы там обороняться; стоит на `true` по умолчанию на всех Precision/HoE+ серверах.

[^1]: Треш (Trash) составляют мелкие зеды -- Кисты, Клоты, Слэшеры, Ползуны и Сталкеры.
[^2]: Медиумы (Mediums) -- это Сирены, Толстяки, Хаски и Берсеркеры.
[^3]: Биги или ларджи (Larges) -- это Мясники и Отбивальщики.